(peripheral 
    (name RFM95)
    (author "Jonathan Soo <jcsoo@agora.com>")
    (version "0.1.0")
    (description "The RFM95/96/97/98(W) transceivers feature the LoRa long range modem that provides ultra-long range spread spectrum communication and high interference immunity whilst minimising current consumption.")
    (size 0x8)
    (register
        (name FIFO)
        (offset 0x00)
        (description "FIFO read/write access")
        (field
            (name FIFO)
            (bit-offset 0)
            (bit-width 8)
            (description "FIFO data input/output")
        )
    )
    (register
        (name OPMODE)
        (offset 0x01)
        (description "")
        (field
            (name LONG_RANGE_MODE)
            (bit-offset 7)
            (bit-width 1)
            (description "")
        )
        (field
            (name ACCESS_SHARED_REG)
            (bit-offset 6)
            (bit-width 1)
            (description "")
        )
        (field
            (name LOW_FREQUENCY_MODE_ON)
            (bit-offset 3)
            (bit-width 1)
            (description "")
        )
        (field
            (name MODE)
            (bit-offset 0)
            (bit-width 3)
            (description "")
        )
    )
    (register
        (name FRF_MSB)
        (offset 0x06)
        (description "MSB of RF carrier frequency")
        (field
            (name FRF)
            (bit-offset 0)
            (bit-width 8)
            (description "")
        )
    )
    (register
        (name FRF_MID)
        (offset 0x07)
        (description "MSB of RF carrier frequency")
        (field
            (name FRF)
            (bit-offset 0)
            (bit-width 8)
            (description "")
        )
    )
    (register
        (name FRF_LSB)
        (offset 0x08)
        (description "LSB of RF carrier frequency")
        (field
            (name FRF)
            (bit-offset 0)
            (bit-width 8)
            (description "")
        )
    )
    (register
        (name PA_CONFIG)
        (offset 0x09)
        (description "")
        (field
            (name PA_SELECT)
            (bit-offset 7)
            (bit-width 1)
            (description "")
        )
        (field
            (name MAX_POWER)
            (bit-offset 4)
            (bit-width 3)
            (description "")
        )        
        (field
            (name OUTPUT_POWER)
            (bit-offset 0)
            (bit-width 4)
            (description "")
        )
    )
    (register
        (name PA_RAMP)
        (offset 0x0a)
        (description "")
        (field
            (name PA_RAMP)
            (bit-offset 0)
            (bit-width 4)
            (description "")
        )
    )
    (register
        (name OCP)
        (offset 0x0b)
        (description "")
        (field
            (name OCP_ON)
            (bit-offset 5)
            (bit-width 1)
            (description "")
        )
        (field
            (name OCP_TRIM)
            (bit-offset 0)
            (bit-width 5)
            (description "")
        )
    )
    (register
        (name LNA)
        (offset 0x0c)
        (description "")
        (field
            (name LNA_GAIN)
            (bit-offset 5)
            (bit-width 3)
            (description "")
        )
        (field
            (name LNA_BOOST_LF)
            (bit-offset 3)
            (bit-width 2)
            (description "")
        )
        (field
            (name LNA_BOOST_HF)
            (bit-offset 0)
            (bit-width 2)
            (description "")
        )
    )
    (register
        (name FIFO_ADDR_PTR)
        (offset 0x0d)
        (description "")
        (field
            (name FIFO_ADDR_PTR)
            (bit-offset 0)
            (bit-width 8)
            (description "")
        )
    )
    (register
        (name FIFO_TX_BASE_ADDR)
        (offset 0x0e)
        (description "")
        (field
            (name FIFO_TX_BASE_ADDR)
            (bit-offset 0)
            (bit-width 8)
            (description "")
        )
    )
    (register
        (name FIFO_RX_BASE_ADDR)
        (offset 0x0f)
        (description "")
        (field
            (name FIFO_RX_BASE_ADDR)
            (bit-offset 0)
            (bit-width 8)
            (description "")
        )
    )
    (register
        (name FIFO_RX_CURRENT_ADDR)
        (offset 0x10)
        (description "")
        (field
            (name FIFO_RX_CURRENT_ADDR)
            (bit-offset 0)
            (bit-width 8)
            (description "")
        )
    )
    (register
        (name IRQ_FLAGS_MASK)
        (offset 0x11)
        (description "")
        (field
            (name RX_TIMEOUT_MASK)
            (bit-offset 7)
            (bit-width 1)
            (description "")
        )
        (field
            (name RX_DONE_MASK)
            (bit-offset 6)
            (bit-width 1)
            (description "")
        )
        (field
            (name PAYLOAD_CRC_ERROR_MASK)
            (bit-offset 5)
            (bit-width 1)
            (description "")
        )
        (field
            (name VALID_HEADER_MASK)
            (bit-offset 4)
            (bit-width 1)
            (description "")
        )
        (field
            (name TX_DONE_MASK)
            (bit-offset 3)
            (bit-width 1)
            (description "")
        )
        (field
            (name CAD_DONE_MASK)
            (bit-offset 2)
            (bit-width 1)
            (description "")
        )
        (field
            (name FHSS_CHANGE_CHANNEL_MASK)
            (bit-offset 1)
            (bit-width 1)
            (description "")
        )
        (field
            (name CAD_DETECTED_MASK)
            (bit-offset 0)
            (bit-width 1)
            (description "")
        )
    )
    (register
        (name IRQ_FLAGS)
        (offset 0x12)
        (description "")
        (field
            (name RX_TIMEOUT)
            (bit-offset 7)
            (bit-width 1)
            (description "")
        )
        (field
            (name RX_DONE)
            (bit-offset 6)
            (bit-width 1)
            (description "")
        )
        (field
            (name PAYLOAD_CRC_ERROR)
            (bit-offset 5)
            (bit-width 1)
            (description "")
        )
        (field
            (name VALID_HEADER)
            (bit-offset 4)
            (bit-width 1)
            (description "")
        )
        (field
            (name TX_DONE)
            (bit-offset 3)
            (bit-width 1)
            (description "")
        )
        (field
            (name CAD_DONE)
            (bit-offset 2)
            (bit-width 1)
            (description "")
        )
        (field
            (name FHSS_CHANGE_CHANNEL)
            (bit-offset 1)
            (bit-width 1)
            (description "")
        )
        (field
            (name CAD_DETECTED)
            (bit-offset 0)
            (bit-width 1)
            (description "")
        )
    )
    (register
        (name RX_NB_BYTES)
        (offset 0x13)
        (description "")
        (field
            (name FIFO_RX_BYTES_NB)
            (bit-offset 0)
            (bit-width 8)
            (description "")
        )
    )
    (register
        (name RX_HEADER_CNT_VALUE_MSB)
        (offset 0x14)
        (description "")
        (field
            (name VALID_HEADER_CNT_MSB)
            (bit-offset 0)
            (bit-width 8)
            (description "")
        )
    )
    (register
        (name RX_HEADER_CNT_VALUE_LSB)
        (offset 0x15)
        (description "")
        (field
            (name VALID_HEADER_CNT_LSB)
            (bit-offset 0)
            (bit-width 8)
            (description "")
        )
    )
    (register
        (name RX_PACKET_CNT_VALUE_MSB)
        (offset 0x16)
        (description "")
        (field
            (name VALID_PACKET_CNT_MSB)
            (bit-offset 0)
            (bit-width 8)
            (description "")
        )
    )
    (register
        (name RX_PACKET_CNT_VALUE_LSB)
        (offset 0x17)
        (description "")
        (field
            (name VALID_PACKET_CNT_LSB)
            (bit-offset 0)
            (bit-width 8)
            (description "")
        )
    )
    (register
        (name MODEM_STAT)
        (offset 0x18)
        (description "")
        (field
            (name RX_CODING_RATE)
            (bit-offset 5)
            (bit-width 3)
            (description "")
        )
        (field
            (name MODEM_STATUS)
            (bit-offset 0)
            (bit-width 5)
            (description "")
        )
    )
    (register
        (name PKT_SNR_VALUE)
        (offset 0x19)
        (description "")
        (field
            (name PACKET_SNR)
            (bit-offset 0)
            (bit-width 8)
            (description "")
        )
    )
    (register
        (name PKT_RSSI_VALUE)
        (offset 0x1A)
        (description "")
        (field
            (name PACKET_RSSI)
            (bit-offset 0)
            (bit-width 8)
            (description "")
        )
    )
    (register
        (name RSSI_VALUE)
        (offset 0x1B)
        (description "")
        (field
            (name RSSI)
            (bit-offset 0)
            (bit-width 8)
            (description "")
        )
    )
    (register
        (name HOP_CHANNEL)
        (offset 0x1C)
        (description "")
        (field
            (name PLL_TIMEOUT)
            (bit-offset 7)
            (bit-width 1)
            (description "")
        )
        (field
            (name RX_PAYLOAD_CRC_ON)
            (bit-offset 6)
            (bit-width 1)
            (description "")
        )
        (field
            (name FHSS_PRESENT_CHANNEL)
            (bit-offset 0)
            (bit-width 6)
            (description "")
        )        
    )
    (register
        (name MODEM_CONFIG1)
        (offset 0x1D)
        (description "")
        (field
            (name BW)
            (bit-offset 4)
            (bit-width 4)
            (description "")
        )
        (field
            (name CODING_RATE)
            (bit-offset 1)
            (bit-width 3)
            (description "")
        )
        (field
            (name IMPLICIT_HEADER_MODE_ON)
            (bit-offset 0)
            (bit-width 1)
            (description "")
        )                
    )
    (register
        (name MODEM_CONFIG2)
        (offset 0x1E)
        (description "")
        (field
            (name SPREADING_FACTOR)
            (bit-offset 4)
            (bit-width 4)
            (description "")
        )
        (field
            (name TX_CONTINUOUS_MODE)
            (bit-offset 3)
            (bit-width 1)
            (description "")
        )
        (field
            (name RX_PAYLOAD_CRC_ON)
            (bit-offset 2)
            (bit-width 1)
            (description "")
        )
        (field
            (name SYMB_TIMEOUT)
            (bit-offset 0)
            (bit-width 2)
            (description "")
        )
    )
    (register
        (name SYMB_TIMEOUT_LSB)
        (offset 0x1F)
        (description "")
        (field
            (name SYMB_TIMEOUT)
            (bit-offset 0)
            (bit-width 8)
            (description "")
        )
    )
    (register
        (name PREAMBLE_MSB)
        (offset 0x20)
        (description "")
        (field
            (name PREAMBLE_LENGTH)
            (bit-offset 0)
            (bit-width 8)
            (description "")
        )
    )
    (register
        (name PREAMBLE_LSB)
        (offset 0x21)
        (description "")
        (field
            (name PREAMBLE_LENGTH)
            (bit-offset 0)
            (bit-width 8)
            (description "")
        )
    )
    (register
        (name PAYLOAD_LENGTH)
        (offset 0x22)
        (description "")
        (field
            (name PAYLOAD_LENGTH)
            (bit-offset 0)
            (bit-width 8)
            (description "")
        )
    )
    (register
        (name MAX_PAYLOAD_LENGTH)
        (offset 0x23)
        (description "")
        (field
            (name PAYLOAD_MAX_LENGTH)
            (bit-offset 0)
            (bit-width 8)
            (description "")
        )
    )
    (register
        (name HOP_PERIOD)
        (offset 0x24)
        (description "")
        (field
            (name FREQ_HOPPING_PERIOD)
            (bit-offset 0)
            (bit-width 8)
            (description "")
        )
    )
    (register
        (name FIFO_RX_BYTE_ADDR)
        (offset 0x25)
        (description "")
        (field
            (name FIFO_RX_BYTE_ADDR_PTR)
            (bit-offset 0)
            (bit-width 8)
            (description "")
        )
    )
    (register
        (name MODEM_CONFIG3)
        (offset 0x26)
        (description "")
        (field
            (name MOBILE_NODE)
            (bit-offset 3)
            (bit-width 1)
            (description "")
        )
        (field
            (name AGC_AUTO_ON)
            (bit-offset 2)
            (bit-width 1)
            (description "")
        )
    )
    (register
        (name PPM_CORRECTION)
        (offset 0x27)
        (description "")
        (field
            (name PPM_CORRECTION)
            (bit-offset 0)
            (bit-width 8)
            (description "")
        )
    )
    (register
        (name FEI_MSB)
        (offset 0x28)
        (description "")
        (field
            (name FREQ_ERROR)
            (bit-offset 0)
            (bit-width 4)
            (description "")
        )
    )
    (register
        (name FEI_MID)
        (offset 0x29)
        (description "")
        (field
            (name FREQ_ERROR)
            (bit-offset 0)
            (bit-width 8)
            (description "")
        )
    )
    (register
        (name FEI_LSB)
        (offset 0x2A)
        (description "")
        (field
            (name FREQ_ERROR)
            (bit-offset 0)
            (bit-width 8)
            (description "")
        )
    )
    (register
        (name RSSI_WIDEBAND)
        (offset 0x2C)
        (description "")
        (field
            (name RSSI_WIDEBAND)
            (bit-offset 0)
            (bit-width 8)
            (description "")
        )
    )
    (register
        (name DETECT_OPTIMIZE)
        (offset 0x31)
        (description "")
        (field
            (name DETECTION_OPTIMIZE)
            (bit-offset 0)
            (bit-width 3)
            (description "")
        )
    )
    (register
        (name INVERT_IQ)
        (offset 0x33)
        (description "")
        (field
            (name INVERT_IQ)
            (bit-offset 6)
            (bit-width 1)
            (description "")
        )
    )
    (register
        (name DETECTION_THRESHOLD)
        (offset 0x37)
        (description "")
        (field
            (name DETECTION_THRESHOLD)
            (bit-offset 0)
            (bit-width 8)
            (description "")
        )
    )
    (register
        (name SYNC_WORD)
        (offset 0x39)
        (description "")
        (field
            (name SYNC_WORD)
            (bit-offset 0)
            (bit-width 8)
            (description "")
        )
    )
    (register
        (name DIO_MAPPING1)
        (offset 0x40)
        (description "")
        (field
            (name DIO0_MAPPING)
            (bit-offset 6)
            (bit-width 2)
            (description "")
        )
        (field
            (name DIO1_MAPPING)
            (bit-offset 4)
            (bit-width 2)
            (description "")
        )
        (field
            (name DIO2_MAPPING)
            (bit-offset 2)
            (bit-width 2)
            (description "")
        )
        (field
            (name DIO3_MAPPING)
            (bit-offset 0)
            (bit-width 2)
            (description "")
        )
    )
    (register
        (name DIO_MAPPING2)
        (offset 0x41)
        (description "")
        (field
            (name DIO4_MAPPING)
            (bit-offset 6)
            (bit-width 2)
            (description "")
        )
        (field
            (name DIO5_MAPPING)
            (bit-offset 4)
            (bit-width 2)
            (description "")
        )
        (field
            (name MAP_PREAMBLE_DETECT)
            (bit-offset 0)
            (bit-width 1)
            (description "")
        )
    )
    (register
        (name VERSION)
        (offset 0x42)
        (description "")
        (field
            (name VERSION)
            (bit-offset 0)
            (bit-width 8)
            (description "")
        )
    )
    (register
        (name PLL_HOP)
        (offset 0x44)
        (description "")
        (field
            (name FAST_HOP_ON)
            (bit-offset 7)
            (bit-width 1)
            (description "")
        )
    )    
    (register
        (name TCXO)
        (offset 0x4B)
        (description "")
        (field
            (name TCXO_INPUT_ON)
            (bit-offset 4)
            (bit-width 1)
            (description "")
        )
    )
    (register
        (name PA_DAC)
        (offset 0x4D)
        (description "")
        (field
            (name PA_DAC)
            (bit-offset 0)
            (bit-width 3)
            (description "")
        )
    )
    (register
        (name FORMER_TEMP)
        (offset 0x5B)
        (description "")
        (field
            (name FORMER_TEMP)
            (bit-offset 0)
            (bit-width 8)
            (description "")
        )
    )
    (register
        (name AGC_REF)
        (offset 0x61)
        (description "")
        (field
            (name AGC_REFERENCE_LEVEL)
            (bit-offset 0)
            (bit-width 6)
            (description "")
        )
    )
    (register
        (name AGC_THRESH1)
        (offset 0x62)
        (description "")
        (field
            (name AGC_STEP1)
            (bit-offset 0)
            (bit-width 5)
            (description "")
        )
    )
    (register
        (name AGC_THRESH2)
        (offset 0x63)
        (description "")
        (field
            (name AGC_STEP2)
            (bit-offset 4)
            (bit-width 4)
            (description "")
        )
        (field
            (name AGC_STEP3)
            (bit-offset 0)
            (bit-width 4)
            (description "")
        )
    )
    (register
        (name AGC_THRESH3)
        (offset 0x64)
        (description "")
        (field
            (name AGC_STEP4)
            (bit-offset 4)
            (bit-width 4)
            (description "")
        )
        (field
            (name AGC_STEP5)
            (bit-offset 0)
            (bit-width 4)
            (description "")
        )
    )
    (register
        (name PLL_HF)
        (offset 0x70)
        (description "")
        (field
            (name PLL_BANDWIDTH)
            (bit-offset 6)
            (bit-width 2)
            (description "")
        )
    )    
)