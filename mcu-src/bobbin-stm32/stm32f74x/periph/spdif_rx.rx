(peripheral
    (group-name SPDIF_RX)
    (name SPDIF_RX)
    (address 0x40004000)
    (description "Receiver Interface")
    (register
        (name CR)
        (offset 0x0)
        (size 0x20)
        (access read-write)
        (reset-value 0x0)
        (description "Control register")
        (field
            (name SPDIFEN)
            (bit-offset 0)
            (bit-width 2)
            (description "Peripheral Block Enable")
        )
        (field
            (name RXDMAEN)
            (bit-offset 2)
            (bit-width 1)
            (description "Receiver DMA ENable for data flow")
        )
        (field
            (name RXSTEO)
            (bit-offset 3)
            (bit-width 1)
            (description "STerEO Mode")
        )
        (field
            (name DRFMT)
            (bit-offset 4)
            (bit-width 2)
            (description "RX Data format")
        )
        (field
            (name PMSK)
            (bit-offset 6)
            (bit-width 1)
            (description "Mask Parity error bit")
        )
        (field
            (name VMSK)
            (bit-offset 7)
            (bit-width 1)
            (description "Mask of Validity bit")
        )
        (field
            (name CUMSK)
            (bit-offset 8)
            (bit-width 1)
            (description "Mask of channel status and user bits")
        )
        (field
            (name PTMSK)
            (bit-offset 9)
            (bit-width 1)
            (description "Mask of Preamble Type bits")
        )
        (field
            (name CBDMAEN)
            (bit-offset 10)
            (bit-width 1)
            (description "Control Buffer DMA ENable for control flow")
        )
        (field
            (name CHSEL)
            (bit-offset 11)
            (bit-width 1)
            (description "Channel Selection")
        )
        (field
            (name NBTR)
            (bit-offset 12)
            (bit-width 2)
            (description "Maximum allowed re-tries during synchronization phase")
        )
        (field
            (name WFA)
            (bit-offset 14)
            (bit-width 1)
            (description "Wait For Activity")
        )
        (field
            (name INSEL)
            (bit-offset 16)
            (bit-width 3)
            (description "input selection")
        )
    )
    (register
        (name IMR)
        (offset 0x4)
        (size 0x20)
        (access read-write)
        (reset-value 0x0)
        (description "Interrupt mask register")
        (field
            (name RXNEIE)
            (bit-offset 0)
            (bit-width 1)
            (description "RXNE interrupt enable")
        )
        (field
            (name CSRNEIE)
            (bit-offset 1)
            (bit-width 1)
            (description "Control Buffer Ready Interrupt Enable")
        )
        (field
            (name PERRIE)
            (bit-offset 2)
            (bit-width 1)
            (description "Parity error interrupt enable")
        )
        (field
            (name OVRIE)
            (bit-offset 3)
            (bit-width 1)
            (description "Overrun error Interrupt Enable")
        )
        (field
            (name SBLKIE)
            (bit-offset 4)
            (bit-width 1)
            (description "Synchronization Block Detected Interrupt Enable")
        )
        (field
            (name SYNCDIE)
            (bit-offset 5)
            (bit-width 1)
            (description "Synchronization Done")
        )
        (field
            (name IFEIE)
            (bit-offset 6)
            (bit-width 1)
            (description "Serial Interface Error Interrupt Enable")
        )
    )
    (register
        (name SR)
        (offset 0x8)
        (size 0x20)
        (access read-only)
        (reset-value 0x0)
        (description "Status register")
        (field
            (name RXNE)
            (bit-offset 0)
            (bit-width 1)
            (description "Read data register not empty")
        )
        (field
            (name CSRNE)
            (bit-offset 1)
            (bit-width 1)
            (description "Control Buffer register is not empty")
        )
        (field
            (name PERR)
            (bit-offset 2)
            (bit-width 1)
            (description "Parity error")
        )
        (field
            (name OVR)
            (bit-offset 3)
            (bit-width 1)
            (description "Overrun error")
        )
        (field
            (name SBD)
            (bit-offset 4)
            (bit-width 1)
            (description "Synchronization Block Detected")
        )
        (field
            (name SYNCD)
            (bit-offset 5)
            (bit-width 1)
            (description "Synchronization Done")
        )
        (field
            (name FERR)
            (bit-offset 6)
            (bit-width 1)
            (description "Framing error")
        )
        (field
            (name SERR)
            (bit-offset 7)
            (bit-width 1)
            (description "Synchronization error")
        )
        (field
            (name TERR)
            (bit-offset 8)
            (bit-width 1)
            (description "Time-out error")
        )
        (field
            (name WIDTH5)
            (bit-offset 16)
            (bit-width 15)
            (description "Duration of 5 symbols counted with SPDIF_CLK")
        )
    )
    (register
        (name IFCR)
        (offset 0xc)
        (size 0x20)
        (access write-only)
        (reset-value 0x0)
        (description "Interrupt Flag Clear register")
        (field
            (name PERRCF)
            (bit-offset 2)
            (bit-width 1)
            (description "Clears the Parity error flag")
        )
        (field
            (name OVRCF)
            (bit-offset 3)
            (bit-width 1)
            (description "Clears the Overrun error flag")
        )
        (field
            (name SBDCF)
            (bit-offset 4)
            (bit-width 1)
            (description "Clears the Synchronization Block Detected flag")
        )
        (field
            (name SYNCDCF)
            (bit-offset 5)
            (bit-width 1)
            (description "Clears the Synchronization Done flag")
        )
    )
    (register
        (name DR)
        (offset 0x10)
        (size 0x20)
        (access read-only)
        (reset-value 0x0)
        (description "Data input register")
        (field
            (name DR)
            (bit-offset 0)
            (bit-width 24)
            (description "Parity Error bit")
        )
        (field
            (name PE)
            (bit-offset 24)
            (bit-width 1)
            (description "Parity Error bit")
        )
        (field
            (name V)
            (bit-offset 25)
            (bit-width 1)
            (description "Validity bit")
        )
        (field
            (name U)
            (bit-offset 26)
            (bit-width 1)
            (description "User bit")
        )
        (field
            (name C)
            (bit-offset 27)
            (bit-width 1)
            (description "Channel Status bit")
        )
        (field
            (name PT)
            (bit-offset 28)
            (bit-width 2)
            (description "Preamble Type")
        )
    )
    (register
        (name CSR)
        (offset 0x14)
        (size 0x20)
        (access read-only)
        (reset-value 0x0)
        (description "Channel Status register")
        (field
            (name USR)
            (bit-offset 0)
            (bit-width 16)
            (description "User data information")
        )
        (field
            (name CS)
            (bit-offset 16)
            (bit-width 8)
            (description "Channel A status information")
        )
        (field
            (name SOB)
            (bit-offset 24)
            (bit-width 1)
            (description "Start Of Block")
        )
    )
    (register
        (name DIR)
        (offset 0x18)
        (size 0x20)
        (access read-only)
        (reset-value 0x0)
        (description "Debug Information register")
        (field
            (name THI)
            (bit-offset 0)
            (bit-width 13)
            (description "Threshold HIGH")
        )
        (field
            (name TLO)
            (bit-offset 16)
            (bit-width 13)
            (description "Threshold LOW")
        )
    )
)