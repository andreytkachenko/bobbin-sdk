(peripheral
    (group-name FLASH)
    (name FLASH)
    (address 0x40023c00)
    (description "FLASH")
    (interrupt
        (name FLASH)
        (value 4)
        (description "Flash global interrupt")
    )
    (register
        (name ACR)
        (offset 0x0)
        (size 0x20)
        (reset-value 0x0)
        (description "Flash access control register")
        (field
            (name LATENCY)
            (bit-offset 0)
            (bit-width 3)
            (access read-write)
            (description "Latency")
        )
        (field
            (name PRFTEN)
            (bit-offset 8)
            (bit-width 1)
            (access read-write)
            (description "Prefetch enable")
        )
        (field
            (name ICEN)
            (bit-offset 9)
            (bit-width 1)
            (access read-write)
            (description "Instruction cache enable")
        )
        (field
            (name DCEN)
            (bit-offset 10)
            (bit-width 1)
            (access read-write)
            (description "Data cache enable")
        )
        (field
            (name ICRST)
            (bit-offset 11)
            (bit-width 1)
            (access write-only)
            (description "Instruction cache reset")
        )
        (field
            (name DCRST)
            (bit-offset 12)
            (bit-width 1)
            (access read-write)
            (description "Data cache reset")
        )
    )
    (register
        (name KEYR)
        (offset 0x4)
        (size 0x20)
        (access write-only)
        (reset-value 0x0)
        (description "Flash key register")
        (field
            (name KEY)
            (bit-offset 0)
            (bit-width 32)
            (description "FPEC key")
        )
    )
    (register
        (name OPTKEYR)
        (offset 0x8)
        (size 0x20)
        (access write-only)
        (reset-value 0x0)
        (description "Flash option key register")
        (field
            (name OPTKEY)
            (bit-offset 0)
            (bit-width 32)
            (description "Option byte key")
        )
    )
    (register
        (name SR)
        (offset 0xc)
        (size 0x20)
        (reset-value 0x0)
        (description "Status register")
        (field
            (name EOP)
            (bit-offset 0)
            (bit-width 1)
            (access read-write)
            (description "End of operation")
        )
        (field
            (name OPERR)
            (bit-offset 1)
            (bit-width 1)
            (access read-write)
            (description "Operation error")
        )
        (field
            (name WRPERR)
            (bit-offset 4)
            (bit-width 1)
            (access read-write)
            (description "Write protection error")
        )
        (field
            (name PGAERR)
            (bit-offset 5)
            (bit-width 1)
            (access read-write)
            (description "Programming alignment error")
        )
        (field
            (name PGPERR)
            (bit-offset 6)
            (bit-width 1)
            (access read-write)
            (description "Programming parallelism error")
        )
        (field
            (name PGSERR)
            (bit-offset 7)
            (bit-width 1)
            (access read-write)
            (description "Programming sequence error")
        )
        (field
            (name BSY)
            (bit-offset 16)
            (bit-width 1)
            (access read-only)
            (description "Busy")
        )
    )
    (register
        (name CR)
        (offset 0x10)
        (size 0x20)
        (access read-write)
        (reset-value 0x80000000)
        (description "Control register")
        (field
            (name PG)
            (bit-offset 0)
            (bit-width 1)
            (description "Programming")
        )
        (field
            (name SER)
            (bit-offset 1)
            (bit-width 1)
            (description "Sector Erase")
        )
        (field
            (name MER)
            (bit-offset 2)
            (bit-width 1)
            (description "Mass Erase of sectors 0 to 11")
        )
        (field
            (name SNB)
            (bit-offset 3)
            (bit-width 5)
            (description "Sector number")
        )
        (field
            (name PSIZE)
            (bit-offset 8)
            (bit-width 2)
            (description "Program size")
        )
        (field
            (name MER1)
            (bit-offset 15)
            (bit-width 1)
            (description "Mass Erase of sectors 12 to 23")
        )
        (field
            (name STRT)
            (bit-offset 16)
            (bit-width 1)
            (description "Start")
        )
        (field
            (name EOPIE)
            (bit-offset 24)
            (bit-width 1)
            (description "End of operation interrupt enable")
        )
        (field
            (name ERRIE)
            (bit-offset 25)
            (bit-width 1)
            (description "Error interrupt enable")
        )
        (field
            (name LOCK)
            (bit-offset 31)
            (bit-width 1)
            (description "Lock")
        )
    )
    (register
        (name OPTCR)
        (offset 0x14)
        (size 0x20)
        (access read-write)
        (reset-value 0xfffaaed)
        (description "Flash option control register")
        (field
            (name OPTLOCK)
            (bit-offset 0)
            (bit-width 1)
            (description "Option lock")
        )
        (field
            (name OPTSTRT)
            (bit-offset 1)
            (bit-width 1)
            (description "Option start")
        )
        (field
            (name BOR_LEV)
            (bit-offset 2)
            (bit-width 2)
            (description "BOR reset Level")
        )
        (field
            (name WDG_SW)
            (bit-offset 5)
            (bit-width 1)
            (description "WDG_SW User option bytes")
        )
        (field
            (name nRST_STOP)
            (bit-offset 6)
            (bit-width 1)
            (description "nRST_STOP User option bytes")
        )
        (field
            (name nRST_STDBY)
            (bit-offset 7)
            (bit-width 1)
            (description "nRST_STDBY User option bytes")
        )
        (field
            (name RDP)
            (bit-offset 8)
            (bit-width 8)
            (description "Read protect")
        )
        (field
            (name nWRP)
            (bit-offset 16)
            (bit-width 12)
            (description "Not write protect")
        )
    )
    (register
        (name OPTCR1)
        (offset 0x18)
        (size 0x20)
        (access read-write)
        (reset-value 0xfff0000)
        (description "Flash option control register 1")
        (field
            (name nWRP)
            (bit-offset 16)
            (bit-width 12)
            (description "Not write protect")
        )
    )
)